<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- 브라우저 언어 감지 및 자동 리다이렉트 (동기 실행 - Flash 방지) -->
  <script src="/js/language-manager.js"></script>
  <meta name="description" content="Real-world implementations of the Short Physical Performance Battery (SPPB) with AndanteFit across clinical and research settings.">
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="canonical" href="https://andantefit.info/case-studies.html" />
  <link rel="alternate" hreflang="en" href="https://andantefit.info/case-studies.html" />
  <link rel="alternate" hreflang="ko" href="https://andantefit.info/ko/case-studies.html" />
  <link rel="alternate" hreflang="es" href="https://andantefit.info/es/case-studies.html" />
  <link rel="alternate" hreflang="x-default" href="https://andantefit.info/case-studies.html" />
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="AndanteFit">
  <meta property="og:title" content="SPPB Case Studies: Physical Performance Assessments | AndanteFit">
  <meta property="og:description" content="Real-world implementations of the Short Physical Performance Battery (SPPB) with AndanteFit across clinical and research settings.">
  <meta property="og:url" content="https://andantefit.info/case-studies.html">
  <title>SPPB Case Studies: Physical Performance Assessments | AndanteFit</title>
  <link rel="stylesheet" href="css/style.css">
  <style>
    .report-list { max-width: 900px; margin: 0 auto; border-top: 2px solid var(--color-deep-blue); }
    .report-item { display: flex; align-items: center; padding: 20px 0; border-bottom: 1px solid var(--color-soft-gray); transition: background-color 0.2s; }
    .report-item:hover { background-color: #fcfcfc; }
    .report-date { width: 130px; font-size: 0.9rem; color: var(--color-text-muted); flex-shrink: 0; }
    .report-main { flex-grow: 1; padding: 0 20px; }
    .report-title { font-size: 1.1rem; font-weight: 600; color: var(--color-deep-blue); margin: 0; display: flex; align-items: center; gap: 10px; }
    .lang-badge { font-size: 0.7rem; background-color: #f1f5f9; color: #475569; padding: 2px 8px; border-radius: 4px; font-weight: 700; border: 1px solid #e2e8f0; }
    .btn-small { padding: 8px 16px; font-size: 0.85rem; border-radius: 6px; white-space: nowrap; }
    @media (max-width: 768px) { .report-item { flex-direction: column; align-items: flex-start; } .report-date { margin-bottom: 8px; } .report-main { padding: 0 0 15px 0; } }
  </style>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-0L4ENVHFYP"></script>
  <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-0L4ENVHFYP');</script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "MedicalWebPage",
    "name": "SPPB Case Studies: Physical Performance Assessments",
    "url": "https://andantefit.info/case-studies.html",
    "description": "Real-world implementations of the Short Physical Performance Battery (SPPB) with AndanteFit across clinical and research settings.",
    "about": "Short Physical Performance Battery (SPPB) clinical assessment tool",
    "publisher": {
      "@type": "Organization",
      "name": "AndanteFit",
      "url": "https://andantefit.info/"
    }
  }
  </script>
</head>
<body>
  <div id="navigation-container"></div>

  <section class="hero">
    <div class="container hero-content">
      <span class="section-label">Research Reports</span>
      <h1 class="hero-headline">Case Studies</h1>
      <p class="hero-subtitle">Real-world implementations of AndanteFit across clinical and research settings.</p>
    </div>
  </section>

  <section class="section">
    <div class="container">
      <div id="caseStudiesContainer" class="report-list">
        <p style="text-align: center; color: var(--color-text-muted); padding: 40px;">Loading reports...</p>
      </div>
    </div>
  </section>

  <!-- Standard Footer -->
  <div data-include="./includes/footer.html"></div>




<script>
(function() {
  'use strict';

  const GITHUB_CONFIG = {
    owner: 'jjgitson',
    repo: 'andantefit.info',
    folder: 'case-studies',
    branch: 'main'
  };

  const customTitles = {
    'CIBERFES-Consensus-Frailty-Screening': 'Consenso CIBERFES: Cribado de Fragilidad'
  };

  // 언어/폴더별로 캐시 분리
  const CACHE_KEY = 'case_studies_cache_' + GITHUB_CONFIG.folder.replace(/[^a-z0-9]/gi, '_');
  const CACHE_TIME_KEY = CACHE_KEY + '_time';
  const CACHE_DURATION = 60 * 60 * 1000;

  function parseFilename(filename) {
    const match = filename.match(/^(\d{4})-(\d{2})-(\d{2})-(.+)\.html$/);
    if (!match) return null;

    const [, year, month, day, fileKey] = match;
    const title = customTitles[fileKey] || fileKey.replace(/-/g, ' ');

    return {
      date: new Date(Number(year), Number(month) - 1, Number(day)),
      dateStr: `${year}.${month}.${day}`,
      title,
      filename,
      fileKey
    };
  }

  function renderCaseStudies(container, caseStudies) {
    const html = caseStudies.map(function(study) {
      return `
        <div class="report-item">
          <div class="report-date">${study.dateStr}</div>
          <div class="report-main">
            <h3 class="report-title">
              <a href="${study.url}" class="title-link">${study.title}</a>
            </h3>
          </div>
          <div class="report-link">
            <a href="${study.url}" class="btn btn-primary btn-small">Ver Informe →</a>
          </div>
        </div>
      `;
    }).join('');
    container.innerHTML = html;
  }

  function showError(container, message) {
    container.innerHTML = `
      <div style="color:#dc2626; padding:20px; background:#fee2e2; border-radius:8px;">
        <div style="font-weight:700;">Error al cargar los informes</div>
        <div style="margin-top:6px;">${message}</div>
        <div style="margin-top:8px; font-size:12px;">Por favor, inténtelo de nuevo más tarde.</div>
      </div>
    `;
  }

  function showCacheWarning(container) {
    container.insertAdjacentHTML('afterbegin',
      `<div style="background:#fef3c7; padding:12px; border-radius:8px; margin-bottom:20px; border-left:4px solid #f59e0b;">
        Mostrando datos en caché.
      </div>`
    );
  }

  async function loadCaseStudies() {
    const container = document.getElementById('caseStudiesContainer');
    if (!container) return;

    const params = new URLSearchParams(window.location.search);
    const forceNoCache = params.get('nocache') === '1';

    try {
      const cached = localStorage.getItem(CACHE_KEY);
      const cacheTime = localStorage.getItem(CACHE_TIME_KEY);

      if (!forceNoCache && cached && cacheTime && (Date.now() - Number(cacheTime)) < CACHE_DURATION) {
        renderCaseStudies(container, JSON.parse(cached));
        return;
      }

      const apiUrl = `https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/contents/${GITHUB_CONFIG.folder}?ref=${encodeURIComponent(GITHUB_CONFIG.branch)}`;
      const response = await fetch(apiUrl);

      if (!response.ok) {
        if (cached) {
          renderCaseStudies(container, JSON.parse(cached));
          showCacheWarning(container);
          return;
        }
        throw new Error('Solicitud API falló: ' + response.status);
      }

      const data = await response.json();
      if (!Array.isArray(data)) throw new Error('Respuesta API inválida');

      const htmlFiles = data.filter(function(f) {
        return f.type === 'file' && f.name.endsWith('.html');
      });

      const caseStudies = htmlFiles
        .map(function(f) {
          const parsed = parseFilename(f.name);
          if (!parsed) return null;

          // 폴더 기준 절대경로로 링크 생성 (언어 페이지 위치에 영향 없음)
          parsed.url = '/' + GITHUB_CONFIG.folder + '/' + encodeURIComponent(f.name);
          return parsed;
        })
        .filter(Boolean)
        .sort(function(a, b) { return b.date - a.date; });

      localStorage.setItem(CACHE_KEY, JSON.stringify(caseStudies));
      localStorage.setItem(CACHE_TIME_KEY, String(Date.now()));

      renderCaseStudies(container, caseStudies);

    } catch (error) {
      console.error(error);
      showError(container, error.message || String(error));
    }
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', loadCaseStudies);
  } else {
    loadCaseStudies();
  }
})();
</script>
  <!-- Related Functional Assessment Resources -->
  <section class="section related-links" style="background-color: var(--color-soft-gray, #f8f9fa); padding: 48px 0;">
    <div class="container">
      <h2 style="margin-bottom: 24px; font-size: 1.5rem;">Related Functional Assessment Resources</h2>
      <ul style="list-style: none; padding: 0; display: flex; flex-wrap: wrap; gap: 16px;">
        <li><a href="/index.html">Short Physical Performance Battery (SPPB) Test Guide</a></li>
        <li><a href="/product.html">SPPB Test Protocol</a></li>
        <li><a href="/validation.html">SPPB Clinical Validation</a></li>
        <li><a href="/references.html">SPPB References and Partners</a></li>
      </ul>
    </div>
  </section>

  <script src="./js/main.js"></script>
  <script src="./js/navigation.js"></script>

</body>
</html>
